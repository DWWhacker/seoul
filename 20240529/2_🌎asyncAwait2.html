<!-- 
ðŸš¨ë¹„ë™ê¸° í”„ë¡œê·¸ëž˜ë°:
async í•¨ìˆ˜ì™€ await 
í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¹„ë™ê¸° ìž‘ì—…ì„ ì²˜ë¦¬í•œë‹¤.
async í•¨ìˆ˜ëŠ” í•­ìƒ Promise ê°ì²´ë¥¼ ë°˜í™˜í•˜ë©°, 
awaitëŠ” async í•¨ìˆ˜ ë‚´ì—ì„œë§Œ ì‚¬ìš©ëœë‹¤.

ðŸš¨ë°ì´í„° ìš”ì²­ ë° ì²˜ë¦¬:
ë²„íŠ¼ í´ë¦­ ì‹œ í•´ë‹¹ 
ì¹´í…Œê³ ë¦¬ì— ëŒ€í•œ ë°ì´í„°ë¥¼ JSONPlaceholder APIì—ì„œ ìš”ì²­í•œë‹¤.
ì‘ë‹µ ë°›ì€ ë°ì´í„°ë¥¼ 
ì²˜ë¦¬í•˜ì—¬ ìž‘ì„±ìž ëª©ë¡ì„ í‘œì‹œí•œë‹¤.

ðŸš¨ì´ë²¤íŠ¸ ì²˜ë¦¬:
ê° ë²„íŠ¼ì— í´ë¦­ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ 
ì¶”ê°€í•˜ì—¬ í´ë¦­ ì‹œ ë°ì´í„°ë¥¼ ìš”ì²­í•˜ê³  ì¶œë ¥í•œë‹¤. -->
<!DOCTYPE html>
<html lang="ko">
  <head>
    <!-- ë¬¸ì„œ ì¸ì½”ë”© ë° ë·°í¬íŠ¸ ì„¤ì • -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- íŽ˜ì´ì§€ ì œëª© ì„¤ì • -->
    <title>async-await</title>
  </head>
  <body>
    <!-- ì œëª© í‘œì‹œ -->
    <h1>Authors</h1>
    <!-- ë²„íŠ¼ ê·¸ë£¹: ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
    <button>posts</button>
    <button>comments</button>
    <button>albums</button>
    <button>photos</button>
    <button>users</button>
    <button>todos</button>
    <!-- ìž‘ì„±ìž ëª©ë¡ì„ í‘œì‹œí•  ë¦¬ìŠ¤íŠ¸ -->
    <ul id="authors"></ul>
  </body>
  <script>
    // ë¹„ë™ê¸° í•¨ìˆ˜ë¥¼ í†µí•´ ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ì¶œë ¥í•˜ëŠ” í•¨ìˆ˜
    async function fetchAndPrint() {
      // í´ë¦­í•œ ë²„íŠ¼ì˜ í…ìŠ¤íŠ¸ ë‚´ìš©ì„ ì €ìž¥
      const btnText = this.innerHTML;
      // API ìš”ì²­í•  URL ìƒì„±
      const url = `https://jsonplaceholder.typicode.com/${btnText}`;
      // APIë¡œë¶€í„° ì‘ë‹µ ë°›ê¸°
      const response = await fetch(url);
      // JSON í˜•ì‹ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ê²°ê³¼ ë°›ê¸°
      const result = await response.json();
      // ìž‘ì„±ìž ëª©ë¡ì„ í‘œì‹œí•  ul ìš”ì†Œ ì„ íƒ
      const ulTag = document.getElementById("authors");
      // ê²°ê³¼ ë°˜ë³µí•˜ì—¬ ì²˜ë¦¬
      result.forEach((el) => {
        // ê°ì²´ì˜ í‚¤ ë°°ì—´ ê°€ì ¸ì˜¤ê¸°
        const keys = Object.keys(el);
        // ê° í‚¤ì— ëŒ€í•´ ì²˜ë¦¬
        keys.forEach((userKey) => {
          // ê°’ì´ ë¬¸ìžì—´ì¸ ê²½ìš°ì—ë§Œ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œìœ¼ë¡œ ì¶”ê°€
          if (typeof el[userKey] == "string") {
            // ìƒˆë¡œìš´ ë¦¬ìŠ¤íŠ¸ ì•„ì´í…œ ìƒì„±
            const liTag = document.createElement("li");
            // í‚¤ì™€ ê°’ í‘œì‹œ
            liTag.innerHTML = `${userKey}: ${el[userKey]}`;
            // ulì— ì¶”ê°€
            ulTag.append(liTag);
          }
        });
      });
    }

    // ëª¨ë“  ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    const btns = document.querySelectorAll("button");
    btns.forEach((el) => {
      el.addEventListener("click", fetchAndPrint);
    });
  </script>
</html>
